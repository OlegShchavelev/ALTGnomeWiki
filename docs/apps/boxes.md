---
aggregation:
  flatpak: org.gnome.Boxes
  sisyphus: gnome-boxes
appstream:
  id: org.gnome.Boxes
  name: Boxes
  icon: /boxes/boxes-logo.svg
  summary: Виртуализация стала проще
  developer:
    name: GNOME
    avatar: https://gitlab.gnome.org/uploads/-/system/group/avatar/8/gnomelogo.png?width=48
  metadata_license:
    name: LGPL-2.1
    link: https://www.gnu.org/licenses/old-licenses/lgpl-2.1.ru.html#SEC1
  keywords:
    - dev
  url:
    homepage: https://gnomeboxes.org/
    bugtracker: https://gitlab.gnome.org/GNOME/gnome-boxes/issues
    translate: https://wiki.gnome.org/TranslationProject
gallery:
  title: Галерея
  type: slider
  items:
    - src: /boxes/boxes-1.png
    - src: /boxes/boxes-2.png
---

# Boxes

Boxes — официальная утилита для рабочего окружения GNOME, которая позволяет легко создавать виртуальные машины из образов операционной системы.

<AGWGallery />

<!--@include: @apps/.parts/install/content-repo.md-->
<!--@include: @apps/.parts/install/content-flatpak.md-->

## Пример использования

После запуска Boxes сразу же можно приступать к созданию нужной виртуальной машины. Для создания ВМ нажмите `+` в левом верхнем углу.

::: tip Пример окна Boxes сразу после запуска. 

![Пример окна Boxes сразу после запуска. Для создания ВМ нажмите **+** в левом верхнем углу.](/boxes/boxes-4.png)

:::

Далее можно выбрать уже имеющийся на диске файл `.iso` образа, содержащий нужную ОС. Для этого нажмите «**Установить из файла**».

Если готового `.iso` образа нет, то можно выбрать нужную ОС из списка. В этом случае она будет автоматически загружена из сети (потребуется подключение к сети Internet) и предложена к установке. Для этого нажмите «**Загрузить ОС**».

::: tip Пример выбора образа для установки ОС.

![Пример выбора образа для установки ОС.](/boxes/boxes-5.png)

:::

::: tip Пример выбора `.iso` образа для установки ОС с локального диска.

![Пример выбора `.iso` образа для установки ОС с локального диска.](/boxes/boxes-6.png)

:::

::: tip Пример выбора образа для установки ОС из сети.

![Пример выбора образа для установки ОС из сети.](/boxes/boxes-7.png)

:::

::: tip Дождитесь загрузки образа. После этого вы сможете продолжить настройку ВМ.

![Дождитесь загрузки образа.](/boxes/boxes-8.png)

:::

Затем нужно задать ресурсы для ВМ и параметры конфигурации. Укажите требуемые параметры. Для любых популярных и современных ОС рекомендуется выбирать тип эмуляции UEFI. Для устаревших или менее популярных ОС (например, для BSD систем) лучше выбирать вариант эмуляции BIOS.

::: tip Укажите параметры для создаваемой ВМ.

![Укажите параметры для создаваемой ВМ.](/boxes/boxes-9.png)

:::

Далее можно приступить к установке ОС. Следуйте указаниям программы установки. 

::: tip Пример запуска ВМ с установкой ОС.

![Пример запуска ВМ с установкой ОС.](/boxes/boxes-11.png)

:::

Утилита Boxes может предложить перехватывать управление вводом. Если нужно, чтобы ввод был перехвачен, выбирайте «**Разрешить**», иначе — выбирайте «**Отказать**». 

::: tip Пример запроса на перехват ввода.

![Пример запроса на перехват ввода.](/boxes/boxes-10.png)

:::

## Взаимодействие с гостевой операционной системой

В установленную гостевую операционную систему можно «пробрасывать» некоторое оборудование прямо из вашего компьютера или ноутбука. Это могут быть устройства USB, такие как флешки, токены, принтеры и т.п., и некоторое другое периферийное оборудование. 

Кроме того, внутри гостевой ВМ сразу будет работать сеть в режиме трансляции адресов (Network address translation, NAT), будет работать буфер обмена (в обе стороны), масштабирование экрана и перенос файлов (Drag and Drop) в обе стороны. Возможно и создание общей сетевой папки. 

::: warning ВАЖНО!

- Нужно, чтобы в гостевой ОС были установлены т.н. драйверы паравиртуализации. Такие драйверы уже содержатся по умолчанию в большинстве современных версий ОС Linux; 
- Если гостевая ОС это Windows, то может потребоваться установить в неё драйверы паравиртуализации Virtio. Их можно скачать по ссылке: https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/archive-virtio/?C=M;O=D; 
- Если требуется использовать FreeBSD в качестве гостевой системы — см. информацию в руководстве FreeBSD: https://docs.freebsd.org/en/books/handbook/virtualization/;
- Сеть внутри гостевой ВМ в конфигурации по умолчанию имеет некоторые ограничения: не работает протокол ICMP, а команда `ping` ни в гостевую ОС, ни из неё не будет возвращать результат. Подключение по протоколу SSH будет работать только из гостевой системы, но не в неё. Виртуальный мост также отсутствует и по умолчанию не создается для гостевых ОС;
- Пробрасываемое оборудование будет отключено от основной (хост) системы, и монопольно подключено внутрь гостевой ОС. Это значит, что одновременно с гостевой ОС использовать в основной ОС проброшенное оборудование не получится.

:::

Для проброса устройства внутрь гостевой ВМ нужно зайти в настройки и переключиться на вкладку «**Устройства и совместимые ресурсы**». Сдвиньте ползунок для проброса нужного устройства. 

Для создания общей папки можно нажать `+` и задать имя общей папки. Тогда выбранная локальная папка гостевой ОС появится под указанным именем в основной (хост) системе.

::: tip Пример проброса видеокамеры и создания общей папки для обмена данными.

![Пример проброса видеокамеры и создания общей папки для обмена данными.](/boxes/boxes-12.png)

:::

Можно просто взять и перетащить в окно ВМ файл, тогда он появится в папке «**Загрузки**» в гостевой ОС.

::: tip Пример обмена данными с помощью Drag and drop.

![Пример обмена данными с помощью Drag and drop.](/boxes/boxes-13.png)

:::


## 3D-ускорение

Boxes даёт возможность использовать 3D-ускорение для виртуальных машин, если оно поддерживается гостевой и хостовой системами. Эта настройка позволит улучшить производительность повседневных приложений и игр, которые требуют графической обработки, включить анимацию рабочего окружения и так далее.

1. Нажмите ПКМ по виртуальной машине, в открывшемся контекстном меню выберите пункт `Параметры`.
2. Если бокс поддерживает 3D-ускорение, то в настройках появится переключатель 3D-ускорения (по умолчанию ускорение отключено). Чтобы включить 3D-ускорение, активируйте данный переключатель.

::: info Не забудьте перезапустить машину
Если включить 3D-ускорение для бокса, который уже запущен, изменения вступят в силу только после перезапуска.
:::

::: tip Пример включения 3D-ускорения для бокса.

![Пример включения 3D-ускорения для бокса.](/boxes/boxes-3.png)

:::

## Изменение каталога с виртуальными машинами

Виртуальные машины занимают довольно много места на диске, поэтому директорию, где они хранятся, можно изменить при необходимости:

```shell
mv ~/.local/share/gnome-boxes/ /path/to/directory
ln -s /path/to/directory ~/.local/share/gnome-boxes
```

`/path/to/directory` — каталог, в который нужно переместить виртуальные машины.

::: warning
Boxes должен быть установлен [из репозитория](./boxes#установка-из-репозитория). Изменение каталога через [Flatpak](/flatpak) на данный момент **не поддерживается**.
:::

## Комбинация клавиш

### Обзор

| Комбинация клавиш | Описание                          |
| ----------------- | --------------------------------- |
| [[F1]]            | Справка                           |
| [[F10]]           | Открыть главное меню              |
| [[Ctrl]] + [[N]]  | Создать новую виртуальную машину  |
| [[Ctrl]] + [[F]]  | Поиск                             |
| [[Ctrl]] + [[?]]  | Комбинации клавиш                 |
| [[Ctrl]] + [[Q]]  | Закрыть окно / Закрыть приложение |

### Создание виртуальной машины и настройка параметров

| Комбинация клавиш | Описание                      |
| ----------------- | ----------------------------- |
| [[Alt]] + [[→]]   | Перейти к следующей странице  |
| [[Alt]] + [[←]]   | Перейти к предыдущей странице |

### Отображение виртуальной машины

| Комбинация клавиш    | Описание                               |
| -------------------- | -------------------------------------- |
| [[CtrlL]] + [[AltL]] | Перейти к следующей странице           |
| [[Alt]] + [[←]]      | Вернуться к обзору                     |
| [[Ctrl]] + [[Q]]     | Закрыть окно / Закрыть приложение      |
| [[F11]]              | Войти / Выйти из полноэкранного режима |
