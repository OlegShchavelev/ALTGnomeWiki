---
aggregation:
  sisyphus: samba-client
appstream:
  name: Samba
  icon: /samba/samba-logo.svg
  summary: Пакет программ, которые позволяют обращаться к сетевым дискам и принтерам на различных операционных системах по протоколу SMB/CIFS.
  metadata_license:
    name: GNU GPLv3
    link: https://choosealicense.com/licenses/gpl-3.0/
  developer:
    name: The Samba Team
  url:
    homepage: https://www.samba.org/
---

# Samba

Samba — пакет программ, которые позволяют обращаться к сетевым дискам и принтерам на различных операционных системах по протоколу SMB/CIFS.

## Установка из репозитория

**Samba** можно установить через терминал:

::: code-group

```shell[apt-get]
su -
apt-get update
apt-get install samba samba-client
```

```shell[epm]
epm -i samba samba-client
```

:::

## Обзор сетевых ресурсов в Nautilus

Для включения обзора сетевых ресурсов SMB протокола в Nautilus достаточно выполнить следующее:

1. Измените группу в `/etc/samba/smb.conf` c Samba на что-то своё, например: `WORKGROUP`;
2. Включите сервис Samba (`smb.service`) в системе, если он ещё не включён:

```shell
su -
systemctl enable --now smb
```

3. Установить пакеты `avahi-daemon` и `nautilus-share`:

::: code-group

```shell[apt-get]
su -
apt-get install avahi-daemon nautilus-share
```

```shell[epm]
epm -i avahi-daemon nautilus-share
```

:::

::: tip
Возможно потребуется выход из пользователя или перезагрузка
:::

## Управление пользователями Samba

По умолчанию конфигурационный файл `smb.conf` содержит следующую строку:

```shell
workgroup = SAMBA
security = user

passdb backend = tdbsam # [!code focus]

printing = cups
printcap name = cups
```

В данной конфигурации Samba использует механизм авторизации основанный на базе данных TDB.

Добавить пользователя в таком случае можно используя следующий подход:

```shell
su -
pdbedit -au username
```

::: tip
Вместо `username` вставьте имя пользователя системы, которого хотите добавить.
:::

Чтобы посмотреть текущих пользователей:

```shell
su -
pdbedit -L
```

## Предоставление доступа к папкам и Android TV

Ниже приведены действия для того, чтобы предоставить доступ устройствам в локальной сети к папке на компьютере. Подобный функционал, к примеру, можно использовать для просмотра контента с Android TV через **NOVA Video Player**, учитывая что два клиента находятся в одной сети (подключены к одному роутеру).

На компьютере добавьте пользователя через команду `pdbedit`, как показано выше. Далее в Настройках GNOME перейдите в раздел «Общий доступ» и включите опцию «Общий доступ к файлам»>

::: warning
Не включайте опцию «Требовать пароль».
:::

Добавьте пользователя в группу `usershares` и перезагрузите компьютер:

```shell
su -
usermod -aG usershares username
systemctl reboot
```

::: tip
Вместо `username` вставьте имя указанного выше пользователя
:::

В Nautilus нажмите правую кнопку мыши на нужной папке и в контекстном меню выберите пункт «Настроить общий доступ». В открывшемся окне включите опцию «Открыть общий доступ к папке», введите желаемое имя для сетевого ресурса и нажмите «Создать ресурс».

После этого на Android TV в **Nova Video Player** перейдите в раздел «Сеть», далее — «Общие папки (SMB)», в котором появится сетевая папка. Для входа используйте логин и пароль локального пользователя.

Готово! Теперь можно смотреть фильмы, скаченные на компьютер, сразу на Android TV
