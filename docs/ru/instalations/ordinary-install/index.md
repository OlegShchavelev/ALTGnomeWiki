# Руководство по установке

## Соглашения и ограничения

Статья описывает типовую установку ALT Gnome Regular (дистрибутив семейства «Альт», использующий репозиторий Sisyphus, далее для краткости именуется ALT Linux) на некий среднестатистический компьютер или ноутбук, но необходимо учитывать следующее:

::: warning ВАЖНО!

- В статье не описывается установка с учётом требований безопасности, применения LVM или шифрования диска;
- В статье не описывается установка ОС ALT Linux как второй системы, если какая-то другая уже установлена на компьютере или вторая система планируется к установке позднее;
- В статье не описывается массовая установка по сети и не рассматриваются возможности программы установки, связанные с различной автоматизацией процедур установки ОС;
- В статье описывается установка ОС на типовой современный компьютер архитектуры Intel x86-64 и только на русском языке.

:::

Таким образом, статья предназначена в основном для начинающих пользователей ALT Linux и не описывает различные возможные варианты усложнений. Целесообразно рассматривать эту статью только как введение в программу установки и объяснение некоторых базовых принципов установки ОС ALT Linux.

## Подготовительные процедуры

::: tip Рекомендуемые действия перед установкой ОС ALT Linux на компьютер:

- Создайте резервную копию важных для данных и удостовериться, что данные сохранились корректно и доступны при откате из резервной копии;
- Убедитесь в том, что компьютер функционирует корректно: диски, микросхемы памяти, процессор, сетевые и другие периферийные устройства не возвращают сообщения об ошибках;
- Убедиться в том, что имеется возможность входа и настройки низкоуровневого интерфейса управления компьютером (BIOS или UEFI). Если там установлен пароль на вход или изменение параметров, то необходимо знать этот пароль;
- Зафиксируйте, в каком режиме (Legacy BIOS и/или UEFI) функционирует низкоуровневый интерфейс управления и загрузка с каких устройств поддерживается;
- Проверьте, что подключение к сети работает исправно. Процедуры установки описаны исходя из предположения, что компьютер будет использовать подключение к сети, как минимум для своевременного получения обновлений;
- Подготовьте загружаемый установочный носитель. Как это сделать описано в статье [«Создание загрузочного диска ALT Regular Gnome»](/bootable-drive);
- Запомните или запишите характеристики (тип, модель, ёмкость, интерфейс и порядок расположения на шине) накопителя, на который будет производиться установка системы;
- Запомните или запишите характеристики сетевой карты (тип, модель, производительность, аппаратный адрес и тому подобное), с помощью которой будет происходить подключение к сети;
- Если есть прокси-сервер, то запомните или запишите его адрес, порт, протокол(ы) работы, имя и пароль и тому подобное;
- Запомните текущее или придумайте самостоятельно имя системы (hostname). Рекомендуется (но необязательно) использовать формат FQDN (Fully-Qualified Domain Name), то есть полностью определённое уникальное имя узла с указанием домена (напр. `alt-01.gnome.mydomain`). Такое имя должно быть задано с выполнением следующих условий:
  - полное имя (вместе с именем домена) не может превышать 255 знаков;
  - каждое имя между точками не может быть больше 63-х знаков;
  - в имени можно использовать только буквы, цифры или дефис;
  - само имя в любой части между точками должно начинаться с буквы или цифры;
  - [подробнее о соглашениях именования](https://datatracker.ietf.org/doc/html/rfc1123#page-13);
- Уточните тип подключения к сети (беспроводное или проводное), а также способ получения сетевого адреса (автоматическое получение или статическое, использование различных VPN и тому подобного);
- В том случае, если используется статическое подключение к сети, то запомните или запишите как минимум перечисленные ниже характеристики подключения к сети: IP-адрес, маску подсети, адрес шлюза по умолчанию, адрес(а) сервера(ов) разрешения имён (DNS). Если используется автоматическая (или, иначе, динамическая) адресация (DHCP), то обычно указанные выше сведения не требуются, а информация о сетевой конфигурации назначается клиенту DHCP-сервером.

:::

## Шаги установки

Шаги установки пронумерованы, на рисунках ниже видны номера шагов установки с первого по тринадцатый.

### Загрузка с установочного носителя

Установите в BIOS или UEFI загрузку с установочного носителя (DVD диска или USB-флешки) и загрузите программу установки ОС. Пример загрузки приведён на рисунках ниже.

::: tip Выберите «**Install ALT regular-gnome/x86-64**» и нажмите [[Enter]]

![Выберите «**Install ALT regular-gnome/x86-64**» и нажмите [[Enter]]](/ordinary-install/inst-picture1.png)

:::

### Шаг установки №1. Язык

На первом шаге установке выбирается язык. Это значит, что программа установки и установленная система будут использовать заданный язык и локализацию.

::: tip Выбирайте русский язык, желаемую комбинацию клавиш для переключения языка и нажмите «**Далее**»

![Выбирайте русский язык, желаемую комбинацию клавиш для переключения языка и нажмите «**Далее**»](/ordinary-install/inst-picture2.png)

:::

### Шаг установки №2. Лицензионное соглашение

На втором шаге установки требуется согласиться с лицензионным соглашением для продолжения установки. При несогласии с лицензионным соглашением, установить систему будет нельзя.

::: tip Отметьте «**Да, я согласен с условиями**» и нажмите «**Далее**»

![Отметьте «**Да, я согласен с условиями**» и нажмите «**Далее**»](/ordinary-install/inst-picture3.png)

:::

### Шаг установки №3. Дата и время

На третьем шаге нужно указать дату и время. Если необходимо, можно указать желаемый сервер времени для синхронизации.

::: warning ВАЖНО!

Точное время и правильный часовой пояс весьма важны даже для тех пользователей, которые используют систему дома. Например, метка времени указывается в файлах журналов аудита. Это позволяет точнее понять, что и когда произошло в системе, если что-то не так. Кроме того, если будет нужно использовать одноразовые пароли на основе времени (TOTP, Time-based One Time Password), аналогичные тем, которые используются в банк-клиентах, то корректные значения даты и времени также весьма критичны. Если время в системе неправильно, то и одноразовые пароли на основе времени могут вычисляться неправильно. В общем, настоятельно рекомендуется использовать в системе правильные значения времени и даты и синхронизировать эти значения со специальными серверами времени, которые передают эталон метки времени клиенту.

:::

Изменять значение установленного флажка «**Хранить время в BIOS по Гринвичу**» не рекомендуется без полного понимания последствий. Изменение этого значения может привести к тому, что сдвиг часового пояса будет исчисляться некорректно. В общем случае рекомендуется оставить этот флажок отмеченным и не трогать.

::: tip Укажите часовой пояс и нажать «**Далее**»

![Укажите часовой пояс и нажать «**Далее**»](/ordinary-install/inst-picture4.png)

:::

Пример изменения часового пояса выглядит так:

::: tip Изменение пояс

![Изменение пояс](/ordinary-install/inst-picture6.png)

:::

Если нужно использовать какой-то другой сервер точного времени (или пул серверов), вместо использующегося по умолчанию (`pool.ntp.org`) или полностью отказаться от получения метки времени (что не рекомендуется), то можно сделать это, нажав на кнопку «**Изменить**» рядом с текстом «**Текущее время устанавливается автоматически**». В открывшейся форме необходимо будет ввести желаемое имя или адрес сервера времени или пула серверов (например: `ntp2.vniiftri.ru` или `ru.pool.ntp.org` соответственно) в поле ввода так, как показано на рисунке ниже и нажать «**OK**». В этой же форме можно проверить текущее значение времени и даты. Если по каким-то причинам не нужно получать метку времени для синхронизации с сервера времени, то снимите флажок «**Получать точное время с NTP-сервера**». Однако ещё раз нужно повторить, что отказываться от синхронизации времени не рекомендуется.

::: tip Укажите имя сервера времени и нажмите «**OK**»

![Укажите имя сервера времени и нажмите «**OK**»](/ordinary-install/inst-picture5.png)

:::

### Шаг установки №4. Подготовка диска

В общем случае рекомендуется использовать конфигурацию, которую предлагает программа установки по умолчанию. Однако целесообразно сделать пояснение для начинающих пользователей ALT Linux о том, как система представляет и именует диски, их разделы, и в чём разница между предлагаемыми в программе установки вариантами разметки

Данный раздел необязателен к прочтению опытными пользователями. Если имеется опыт использования операционной системой macOS от компании Apple, то такие же принципы разметки дисков используются и в ней.

::: warning ВАЖНО!

- В отличие от Windows, в операционных системах на базе ядра GNU/Linux (далее — Linux) разделы жёстких дисков в системе не именуются только по отдельным буквам английского алфавита. Вместо букв дисков используются так называемые «**точки монтирования**», представляющие собой древовидную иерархию папок, сходящуюся к корню файловой системы, обозначаемому как `/` или «корень»;
- Любой диск или раздел диска может быть отформатирован и «смонтирован» (подключён) в любую папку, находящуюся в корне. При этом, если в папке уже были какие-то файлы, то они будут заменены новым содержимым этого раздела. Например, если в Windows на диске было два раздела (скажем, диск «C:» содержал программы и систему, а диск «D:» — данные пользователей), то в Linux всё содержимое диска, включая системные файлы, будет представлено как `/`, а раздел с данными пользователей будет смонтирован как `/home`;
- Сами диски (накопители) именуются согласно очерёдности их подключения на аппаратной шине данных. Например, для дисков SATA первый найденный на шине жёсткий диск будет обозначен как `/dev/sda`, второй — `/dev/sdb`, третий — `/dev/sdc` и так далее. Для дисков NVMe SSD именование и нумерация немного другие, но общий принцип наименования сохраняется. Например, первый найденный системой диск NVMe будет обозначен как `/dev/nvme0n1` (аналогично `/dev/sda`), второй NVMe диск — `/dev/nvme0n2` (аналогично `/dev/sdb`) , и т.д. При этом, само имя `/dev/nvme0` указывает на порядковый номер контроллера NVMe SSD, а не на диск, подключённый к этому контроллеру;
- Разделы диска именуются в порядке их создания. То есть первый созданный раздел на диске SATA будет именоваться как `/dev/sda1` (или `/dev/nvme0n1p1`, в случае с диском NVMe SSD), второй раздел первого SATA диска — `/dev/sda2` (или `/dev/nvme0n1p2` в случае с диском NVMe SSD), четвёртый раздел на третьем диске SATA будет представлен как `/dev/sdc4` (или `/dev/nvme0n3p4` в случае с диском NVMe SSD) и так далее;
- Обычно для работы Linux достаточно только двух разделов — корня (`/`) и раздела подкачки («swap»). Как уже ясно из написанного выше, корневой раздел (`/`) содержит всю систему целиком (как если бы существовал один диск «C:» в Windows). Раздел подкачки система использует для собственных нужд: он он используется для хранения страниц из оперативной памяти в случае её дефицита. Проще говоря, если в системе много оперативной памяти, то в общем случае раздел подкачки используется реже. Если в системе мало оперативной памяти, то раздел подкачки будет использоваться чаще. Именно эти два раздела (корневой раздел `/` и раздел подкачки и предлагает программа установки в варианте по умолчанию. Обычно программа установки предлагает оптимальный размер этих разделов. Для начинающих пользователей ALT Linux разумно просто согласиться с предложением программы установки и нажать «**Далее**». Обратите внимание, что в разделе подкачки нет файлов (там, возможно, когда-нибудь будут или уже были страницы памяти), обычно пользователи не работают с ним напрямую.

:::

В ALT Linux, как и в других дистрибутивах Linux, поддерживается несколько файловых систем. Файловая система — это способ организации управления (хранения, поиска, удаления и так далее) файлами и папками на дисковом разделе. Некоторые файловые системы более удобны в тех или иных случаях. Не вдаваясь в технические детали можно лишь пояснить, что наиболее универсальной и широко поддерживаемой является файловая система `ext4`, предлагаемая по умолчанию программой установки

Файловая система `btrfs` предлагается в качестве альтернативы `ext4`. Разница между ними для среднестатистического домашнего пользователя обычно сводится к тому, что `btrfs` поддерживает создание моментальных снимков, в то время как файловая система `ext4` представляется более универсальной и консервативной в силу того, что она реализована раньше `btrfs`. Если нужно получить более стандартное и отлаженное временем решение — выберите вариант установки с `ext4`. Если нужно получить более функциональную и современную систему с возможностью создания мгновенных снимков — выберите вариант с `btrfs`. В этом случае можно меньше беспокоиться о том, что системе будет причинён вред, так как всегда можно будет откатиться до прежнего рабочего её состояния. В случае отката к точке восстановления все данные, накопленные после создания снимка, будут утрачены

Обратите внимание на то, что программа установки создаёт два раздела (`/` и «swap») в случае использования файловой системы `ext4` и три раздела в случае использования `btrfs` (`/`, «swap» и `/home`), выделяя пользовательские данные в отдельный раздел на диске так, как если бы использовались диски «C:» и «D:» в случае с Windows.

::: tip Выберите вариант разметки диска и нажмите «**Далее**»

![Выберите вариант разметки диска и нажмите «**Далее**»](/ordinary-install/inst-picture7.png)

:::

Если на диске уже была какая-то информация, то можно отметить флажок «**Очистить выбранные диски перед применением профиля**». Это означает, что все предыдущие данные будут стёрты, разделы будут размечены и отформатированы заново и на них будет установлена ОС. Затем программа установки предупредит о необратимости изменений.

::: warning ВАЖНО!

Если на диске были данные, ещё раз подумайте о том, нужны ли они и есть ли актуальная резервная копия. После этого действия все данные будут уничтожены и их восстановление превратится в довольно трудоёмкий и сложный процесс без гарантии получить успешный результат и вернуть данные.

:::

::: tip Убедившись в наличии резервных копий важных файлов, нажмите «**ОК**»

![Убедившись в наличии резервных копий важных файлов, нажмите «**ОК**»](/ordinary-install/inst-picture8.png)

:::

После этого система создаст выбранные разделы. Обратите внимание на то, что в случае использования современного оборудования с поддержкой режима загрузки UEFI (рекомендуется использовать этот режим загрузки), операционная система автоматически создаст дополнительный служебный раздел для хранения переменных EFI с точкой монтирования `/boot/efi`, типом файловой системы FAT32 и размером 512 мегабайт. Согласитесь с выбором и нажмите «**Далее**».

::: tip Подтвердите конфигурацию разметки диска и нажмите «**Далее**»

::: tabs

== `ext4`

![`ext4`](/ordinary-install/inst-picture9.png)

== `btrfs`

![`btrfs`](/ordinary-install/inst-picture9-2.png)

:::

Ещё раз подтвердите свои действия и продолжайте установку.

::: tabs

== `ext4`

![`ext4`](/ordinary-install/inst-picture10.png)

== `btrfs`

![`btrfs`](/ordinary-install/inst-picture10-2.png)

:::

### Шаг установки №5. Установка базовой системы

На этом шаге установки никаких действий от пользователя не требуется. Программа установки сообщает, что приступила к установке базовой системы. На этом шаге устанавливаются основные компоненты системы, без которых она не может функционировать.

::: tip Ожидайте окончания установки базовой системы

![Ожидайте окончания установки базовой системы](/ordinary-install/inst-picture11.png)

:::

### Шаг установки №6. Установка системы

На этом шаге установки, как и на предыдущем, никаких действий от пользователя не требуется. Программа установки сообщает, что приступила к установке всех нужных пользователям программ. На этом шаге устанавливаются компоненты системы, без которых она может функционировать только ограниченно.

::: tip Ожидайте окончания установки системы

![Ожидайте окончания установки системы](/ordinary-install/inst-picture12.png)

:::

### Шаг установки №7. Сохранение настроек

На этом шаге установки, как и на двух предыдущих шагах, никаких действий от пользователя не требуется. Программа установки в этот момент производит первичную конфигурацию ОС для последующего запуска.

::: tip Ожидайте окончания сохранения настроек

![Ожидайте окончания сохранения настроек](/ordinary-install/inst-picture13.png)

:::

### Шаг установки №8. Установка загрузчика

Далее программа установки предложит установить загрузчик. В большинстве случаев целесообразно согласиться с предложением по умолчанию. Программа установки обычно корректно распознаёт диск, на который необходимо установить загрузчик. Опытным пользователям настоятельно рекомендуется установить пароль на загрузчик, это усложнит компрометацию системы.

::: warning ВАЖНО!

Загрузчик — это специальная программа, без которой операционная система не сможет корректно загрузится и работать. ALT Linux использует наиболее популярный, современный и функциональный загрузчик — GRUB2.

:::

::: tabs

== С паролем

В случае установки пароля, отметьте флажок «**Установить или сбросить пароль**» и введите желаемый пароль для загрузчик. При обычном использовании системы вводить этот пароль не нужно, но если позднее потребуется изменить параметры текущей загрузки, то необходимо будет ввести имя пользователя, управляющего модификацией загрузки, и этот пароль. Используемое имя для модификации параметров загрузчика всегда одинаковое — `boot` (это имя не имеет никакого отношения к именам пользователей в ОС). Рекомендуется использовать стойкий пароль загрузчика, для домашнего пользователя приемлемым вариантом будет использование парольной фразы не короче, чем в 6 знаков.

::: tip Отметьте флажок «**Установить или сбросить пароль**», заполните поля с парольной фразой загрузчика и нажмите «**Далее**»

![Отметьте флажок «**Установить или сбросить пароль**», заполните поля с парольной фразой загрузчика и нажмите «**Далее**»](/ordinary-install/inst-picture14.png)

== Без пароля

В случае пропуска установки пароля просто согласитесь с предложением программы установки и нажмите «**Далее**».

::: tip Согласитесь с предложением по умолчанию и нажмите «**Далее**»

![Согласитесь с предложением по умолчанию и нажмите «**Далее**»](/ordinary-install/inst-picture15.png)

:::

### Шаг установки №9. Имя компьютера

Далее необходимо указать имя компьютера (системы). Настоятельно рекомендуется использовать уникальное в рамках используемой сети имя и полностью определённое. Рекомендации по его выбору уже в разделе [«Подготовительные процедуры»](#подготовительные-процедуры). При необходимости повторно перечитайте этот раздел и придумайте уникальное имя для своей системы или обратитесь к администратору.

::: tip Укажите имя системы и нажмите «**Далее**»

![Укажите имя системы и нажмите «**Далее**»](/ordinary-install/inst-picture16.png)

:::

### Шаг установки №10. Администратор системы

Необходимо придумать пароль для администратора системы. Задайте пароль администратора системы и нажмите «**Далее**».

::: warning ВАЖНО!

Администратор системы (`root` или суперпользователь) — это пользователь, обладающий неограниченными полномочиями, способный производить в системе любые действия, в том числе деструктивные. Критически важно использовать стойкий к подбору и длинный пароль администратора. Для пароля администратора рекомендуется использовать случайную комбинацию из букв разного регистра, цифр и знаков препинания. Неразумно использовать популярные слова, типа `Привет`, `пароль`, `Pa$$w0rd`, даты рождения, комбинации символов, идущих подряд, вроде `qwerty` и тому подобное.

Стойки пароль можно сгенерировать автоматически, отметив флажок «**Создать автоматически**». Программа установки сама предложит устойчивый к компрометации пароль. Его необходимо запомнить.

Повседневное использование системы не следует осуществлять в контексте полномочий учётной записи администратора `root`. Работу в системе нужно осуществлять от имени обычного пользователя, используя учётную запись администратора только в крайнем случае при обслуживании, восстановлении или настройке параметров системы, требующих обязательного использования учётной записи администратора. При использовании учётной записи администратора `root` всегда нужно действовать аккуратно, перепроверяя вводимые команды и любые операции. Совершённые от имени администратора ошибки могут носить необратимый характер.

:::

::: tip Задайте пароль администратора системы и нажмите «**Далее**»

![Задайте пароль администратора системы и нажмите «**Далее**»](/ordinary-install/inst-picture17.png)

:::

### Шаг установки №11. Системный пользователь

Система предложит создать системного пользователя. Это пользователь, от имени которого необходимо осуществлять повседневную работу в ОС.

Обратите внимание, что если установлен флажок «**Login**» (установлен по умолчанию), то имя и данные пользователя будут предложены программой установки автоматически. Иначе (если флажок «**Login**» снять), нужно будет заполнить значения самостоятельно.

При выборе пароля пользователя рекомендуется руководствоваться теми же соображениями, что и при выборе пароля администратора `root`. Рекомендуется использовать разные пароли для системного пользователя и пользователя `root`.

Так же, как и для пользователя `root`, для генерации пароля можно использовать флажок «**Создать автоматически**». Его нужно запомнить.

Поле «**Настоящее имя**» создано для удобства. Его заполнение необязательно.

Поле «**Имя**» должно быть обязательно начинаться с латинской буквы или нижнего подчёркивания и далее содержать латиницу, цифры или нижние подчёркивания.

::: tip Задайте имя и пароль для пользователя и нажмите «**Далее**»

![Задайте имя и пароль для пользователя и нажмите «**Далее**»](/ordinary-install/inst-picture18.png)

:::

### Шаг установки №13. Завершение установки

Если всё выполнено правильно, то будет показано сообщение об окончании установки. Нажмите «**Завершить**». После этого компьютер перезагрузится и можно будет приступить к работе.

Желаем приятной, удобной, безопасной и эффективной работы в системе.

::: tip Завершение установки, нажмите «**Завершить**»

![Завершение установки, нажмите «**Завершить**»](/ordinary-install/inst-picture18.png)

:::
