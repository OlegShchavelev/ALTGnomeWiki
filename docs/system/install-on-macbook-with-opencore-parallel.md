# Установка ALT Regular Gnome на Mac [OpenCore Bootloader, Swap через файл]

Данное руководство написано с целью рассказать о возможности установки Alt Linux
параллельно установленной системе macOS

::: warning
В руководстве используется OpenCore загрузчик из пакета [OpenCore Legacy Patcher](https://dortania.github.io/OpenCore-Legacy-Patcher/)
:::

## Подготовка

1. В `Balena Etcher` или с помощью `dd` делаем загрузочную флешку с Alt Linux Gnome
2. В `DiskUtility` выделяем раздел для установки (форматируя его в FAT32, что-бы проще было найти)
3. Перезагружаем Mac, с зажатой клавишей `Option` и выбираем `EFI Boot` с иконкой OpenCore
4. Появится список дисков с которого надо грузится, там выбираем `El Torito`
5. Выбираем `Install ALT regular-gnome/x86_64`

## Установка

1. В разделе разметки диска выбираем `Вручную`
2. На следующем экране ищем раздел размером более 200МБ отформатированный в FAT32 (~sda3), это и будет наш раздел.

 - Нажимаем удалить файловую систему
 - Нажимаем создать файловую систему и выбираем Ext4 (пойдем простым путем)
 - На шаге изменить точку монтирования убедиться что стоит `/` и нажать `ОК`

3. Далее переходим на раздел размером 200МБ (sda1), это раздел EFI с файловой системой FAT32) и нажимем кнопку `Изменить точку монтирования`

 - Система сама нам предложит точку монтирования `/boot/efi`

::: warning
Убеждаемся что квадрат поля Отформатировать пуст! (галки нет) !!!
:::

4. Продолжаем обычную установку (swap добавим позже)
5. Загрузчик устанавливается как обычно (ничего менять не надо)

## Настройка после установки

Так как в процессе установки мы отказались от отдельного раздела под SWAP то его можно создать вручную следующим образом:

:::warning
Данная инструкция бесполезна для обладателей BTRFS, так как BTRFS не позволяет делать файловый SWAP :(
:::

```shell
su -
dd if=/dev/zero of=/swapfile bs=1m count=`free -m | awk 'NR==2 {print $2}'` # создаст своп размером с оперативную память :)
chmod 600 /swapfile
mkswap /swapfile
echo "/swapfile nonw swap defaults 0 0" >> /etc/fstab # важно >> 

cat /etc/fstab # смотрим что строка с /swapfile появилась в конце файла

reboot
```

TODO: - Про настройку отображения значка системы Альт в OpenCore bootloader-e
TODO: - Наглядные материалы
