# Руководство по установке 

## Соглашения и ограничения

Статья описывает типовую установку ОС на некий среднестатистический компьютер или ноутбук, но необходимо учитывать следующее:

::: warning ВАЖНО!

- В статье не описывается установка с учётом требований безопасности, применения LVM или шифрования диска;
- В статье не описывается установка ОС Alt Linux как второй системы, если какая-то другая уже установлена на компьютере, или вторая система планируется к установке позднее;
- В статье не описывается массовая установка по сети, и здесь не рассматриваются возможности программы установки, связанные с различной автоматизацией процедур установки ОС;
- В статье описывается установка ОС на типовой современный компьютер архитектуры Intel x86-64 и только на русском языке.
:::

Таким образом, статья предназначена в основном для начинающих пользователей Alt Linux, и не описывает различные возможные варианты усложнений. Целесообразно рассматривать эту статью только как введение в программу установки и объяснение некоторых базовых принципов установки ОС Alt Linux. 

## Подготовительные процедуры

::: tip Прежде чем вы начнёте устанавливать ОС на ваш компьютер, рекомендуется:

- Создать резервную копию всех важных для вас данных, и удостовериться, что данные сохранились корректно и доступны при обратном откате из резервной копии;
- Постараться убедиться в том, что компьютер функционирует корректно (диски, микросхемы памяти, процессор, сетевые и другие периферийные устройства не возвращают сообщения об ошибках);
- Убедиться в том, что вы имеете возможность входа и настройки низкоуровневого интерфейса управления компьютером (BIOS или UEFI). Если там установлен пароль на вход или изменение параметров, то необходимо обладать знанием этого пароля; 
- Зафиксировать, в каком режиме (Legacy BIOS и/или UEFI) функционирует низкоуровневый интерфейс управления, и загрузка с каких устройств поддерживается;
- Проверить, что подключение к сети работает исправно. Процедуры установки описаны исходя из предположения, что вы будете использовать подключение к сети, как минимум для своевременного получения обновлений;
- Подготовить загружаемый установочный носитель. Как это сделать описано по по ссылке: https://alt-gnome.wiki/bootable-drive.html;
- Запомнить или записать характеристики (тип, модель, ёмкость, интерфейс и порядок расположения на шине) вашего накопителя, на который вы планируете установить систему;
- Запомнить или записать характеристики сетевой карты (тип, модель, производительность, аппаратный адрес и т.п.), с помощью которой вы будете подключаться к сети;
- Если есть прокси-сервер, то запомнить или записать его адрес, порт, протокол(ы) работы, имя и пароль и т.п.;
- Запомнить текущее или придумать самостоятельно имя (hostname) системы, желательно в формате FQDN (Fully-Qualified Domain Name), т.е. полностью определённое уникальное имя узла, с указанием домена (напр. `alt-01.gnome.mydomain`). Такое имя должно быть задано с выполнением следующих условий: полное имя (вместе с именем домена) не может превышать 255 знаков, каждое имя между точками не может быть больше 63-х знаков, в имени можно использовать только буквы, цифры или тире, а само имя (в любой части между точками) должно начинаться с буквы или цифры (подробнее о соглашениях именования см. https://datatracker.ietf.org/doc/html/rfc1123#page-13);
- Уточнить тип подключения к сети (беспроводное или проводное), а также способ получения сетевого адреса (автоматическое получение или статическое, использование различных VPN и т.п.);
- В том случае, если используется статическое подключение к сети, то запомнить или записать как минимум перечисленные ниже характеристики вашего подключения к сети: IP адрес, маску подсети, адрес шлюза по умолчанию, адрес(а) сервера(ов) разрешения имён (DNS). Если используется автоматическая (или, иначе, динамическая) адресация (DHCP), то обычно указанные выше сведения не требуются, а информация о сетевой конфигурации назначается клиенту DHCP сервером.  
:::

## Шаги установки

Шаги установки пронумерованы, на рисунках ниже видны номера шагов установки с первого по тринадцатый.

### Загрузка с установочного носителя

Установите в BIOS или UEFI загрузку с установочного носителя (DVD диска или USB флешки), и загрузите программу установки ОС. Пример загрузки приведён на рисунках ниже.  

::: tip Выбирайте "Install ALT regular-gnome/x86-64". Нажмите **ENTER**

![Выбрать "Install ALT regular-gnome/x86-64" и нажать ENTER](/ordinary-install/inst-picture1.png)

:::

### Шаг установки №1. Язык

На первом шаге установке выбирается язык. Это значит, что и программа установки, и установленная система -- будут использовать заданный язык и локализацию.

::: tip Выбирайте русский язык, желаемую комбинацию клавиш для переключения языка и нажмите "__Далее__"

![Выбрать "Русский", желаемую комбинацию переключения языка, нажать "Далее"](/ordinary-install/inst-picture2.png)

:::

### Шаг установки №2. Лицензионное соглашение

На втором шаге установки требуется согласиться с лицензионным соглашением для продолжения установки. Иначе, если вы не согласны с лицензионным соглашением, установить систему будет нельзя.

::: tip Отметьте "__Да, я согласен с условиями__" и нажмите "__Далее__"

![Отметить "Да, я согласен с условиями", нажать "Далее"](/ordinary-install/inst-picture3.png)

:::

### Шаг установки №3. Дата и время

На третьем шаге нужно указать дату и время, и, если необходимо, можно указать желаемый сервер времени для синхронизации.  

::: warning ВАЖНО!

Точное время и правильный часовой пояс весьма важны даже для тех пользователей, которые используют систему дома. Например, метка времени указывается в файлах журналов аудита. Это позволяет точнее понять, что и когда произошло в системе, если что-то не так. Кроме того, если будет нужно использовать одноразовые пароли на основе времени (TOTP, Time-based One Time Password), аналогичные тем, которые используются в банк-клиентах, то корректные значения даты и времени также весьма критичны. Если время в системе неправильно, то и одноразовые пароли на основе времени могут вычисляться неправильно. В общем, настоятельно рекомендуется использовать в системе правильные значения времени и даты, и синхронизировать эти значения со специальными серверами времени, которые передают эталон метки времени клиенту.

:::

Изменять значение установленного чекбокса "__Хранить время в BIOS по Гринвичу__" не рекомендуется, без полного понимания последствий. Изменение этого значения может привести к тому, что сдвиг часового пояса будет исчисляться некорректно. В общем случае рекомендуется оставить этот чекбокс отмеченным и не трогать.

::: tip В общем случае можно указать ваш часовой пояс, и нажать "__Далее__"

![Пример использования значений по умолчанию, нажмите "Далее"](/ordinary-install/inst-picture4.png)

:::

Пример изменения часового пояса выглядит так:

::: tip Измените ваш часовой пояс, и нажмите "__Далее__"

![Укажите ваш часовой пояс (например, для Иркутска) и нажмите "Далее"](/ordinary-install/inst-picture6.png)

:::

Если же вы хотите использовать какой-то другой сервер точного времени (или пул серверов), вместо использующегося по умолчанию (`pool.ntp.org`), либо полностью отказаться от получения метки времени (что не рекомендуется), то вы можете сделать это, нажав на кнопку "__Изменить__" рядом с текстом "__Текущее время устанавливается автоматически__". В открывшейся форме необходимо будет ввести желаемое имя или адрес сервера времени или пула серверов (например: `ntp2.vniiftri.ru` или `ru.pool.ntp.org` соответственно) в поле ввода так, как показано на рисунке ниже. И нажать "__OK__". В этой же форме вы можете проверить текущее значение времени и даты. Если вам по каким-то причинам  не нужно получать метку времени для синхронизации с сервера времени, то снимите чекбокс "__Получать точное время с NTP-сервера__". Однако, ещё раз нужно повторить, что отказываться от синхронизации времени не рекомендуется.

::: tip Измените имя сервера времени, и нажмите "__OK__"

![Укажите новое имя сервера времени и нажмите "ОК"](/ordinary-install/inst-picture5.png)

:::

### Шаг установки №4. Подготовка диска

В общем случае, рекомендуется использовать конфигурацию, которую предлагает программа установки по умолчанию. Однако целесообразно сделать пояснение для начинающих пользователей Alt Linux о том, как система представляет и именует диски, их разделы, и в чём разница между предлагаемыми в программе установки вариантами разметки. Если вы уже опытный пользователь, то можно не читать пояснение ниже, а сразу переходить к разметке. Если вы уже пользовались операционной системой Mac OS X от компании Apple, то такие же принципы разметки дисков используются и в ней, и вам будет привычнее. 

::: warning ВАЖНО!

- В отличии от ОС Windows, в ОС Linux любых версий разделы жёстких дисков в системе не именуются только по отдельным буквам английского алфавита;
- Вместо букв дисков используются т.н. "точки монтирования", представляющие собой древовидную иерархию папок, сходящуюся к корню файловой системы, обозначаемому как `/` или "корень";
- Любой диск или раздел диска может быть отформатирован, и подключён (в терминологии ОС Linux обычно используется слово "смонтирован") к этому корню в любую папку, находящуюся в этом корне. При этом, если в папке уже были какие-то файлы, то они будут заменены новым содержимым этого раздела. Например, если у вас в ОС Windows на диске было два раздела, скажем, диск "C" содержал программы и систему, а диск "D" содержал данные пользователей, то в ОС Linux всё содержимое диска (включая системные файлы) будет представлено как `/`, а раздел с данными пользователей будет смонтирован как `/home`;
- Сами диски (накопители) именуются согласно очерёдности их подключения на аппаратной шине данных. Например, для дисков SATA первый найденный на шине жёсткий диск будет обозначен как `/dev/sda`, второй `/dev/sdb`, третий -- `/dev/sdc` и т.д. Для дисков NVME SSD именование и нумерация немного другие, но общий принцип наименования сохраняется. Например, первый найденный системой диск NVME будет обозначен как `/dev/nvme0n1` (аналогично `/dev/sda`), второй NVME диск -- `/dev/nvme0n2` (аналогично `/dev/sdb`) , и т.д. При этом, само имя `/dev/nvme0` указывает на порядковый номер контроллера NVME SSD, а не на диск, подключённый к этому контроллеру;
- Разделы диска именуются в порядке их создания. То есть первый созданный раздел на диске SATA будет именоваться как `/dev/sda1` (или `/dev/nvme0n1p1`, в случае с диском NVME SSD), второй раздел первого SATA диска -- `/dev/sda2` (или `/dev/nvme0n1p2` в случае с диском NVME SSD), четвёртый раздел на третьем диске SATA будет представлен как `/dev/sdc4` (или `/dev/nvme0n3p4` в случае с диском NVME SSD), и т.п.;
- Обычно для работы OC Linux достаточно только двух разделов -- корень (`/`) и раздел подкачки (т.н. "swap" раздел, или просто "swap"). Как уже ясно из написанного выше, кореневой раздел (`/`) содержит всю систему целиком (как если бы у вас был бы только один диск "C" в ОС Windows). Раздел подкачки система использует для собственных нужд, и он служит для того, чтобы в нём хранились страницы из оперативной памяти, которые туда вытесняются в случае её дефицита. Проще говоря, если в вашей системе много оперативной памяти, то в общем случае раздел подкачки используется реже. Если в вашей системе мало оперативной памяти, то раздел подкачки будет использоваться чаще. Именно эти два раздела (корневой раздел `/` и раздел подкачки "swap" и предлагает программа установки в варианте по умолчанию. Обычно программа установки довольно аккуратно предлагает оптимальный размер этих разделов, и если вы начинающий пользователь Alt Linux, то разумно просто согласиться с предложением программы установки и нажать "__Далее__". Обратите внимание, что в разделе подкачки нет файлов (там, возможно, когда-нибудь будут или уже были страницы памяти), пользователи с ним напрямую не работают, и взаимодействовать с ним пользователю обычно никогда не придётся;
- В ОС Alt Linux (как и в любой другой аналогичной Linux системе) поддерживается несколько т.н. "файловых систем". Файловая система -- это способ организации управления (хранения, поиска, удаления и т.п.) файлами и папками на дисковом разделе. Некоторые файловые системы более удобны в тех или иных случаях. Не вдаваясь в технические детали можно лишь пояснить, что наиболее универсальной и широко поддерживаемой является файловая система `ext4`, предлагаемая по умолчанию программой установки;
- Файловая система `btrfs` предлагается ещё одним вариантом программой установки (в качестве альтернативы `ext4`). Разница между ними для среднестатистического домашнего пользователя обычно сводится к тому, что `btrfs` поддерживает создание моментальных снимков, в то время как файловая система `ext4` представляется более универсальной и консервативной в силу того, что она раньше придумана и сделана, чем `btrfs`. Если вы хотите получить более стандартное и отлаженное временем решение -- выбирайте вариант установки с `ext4`. Если вы хотите получить более функциональную и современную систему с возможностью создания мгновенных снимков -- выбирайте вариант с `btrfs`. В этом случае вы можете меньше беспокоиться о том, что вы нанесёте вред системе, так как всегда можно будет откатиться до прежнего рабочего её состояния (правда в случае отката к точке восстановления все данные, накопленные после создания снимка будут утрачены);
- Обратите внимание на то, что программа установки создаёт два раздела (`/` и "swap") в случае использования файловой системы `ext4`, и три раздела, в случае использования `btrfs` (`/`, "swap" и `/home`), выделяя пользовательские данные в отдельный раздел на диске так, как если бы вы использовали диски "C" и "D" в случае с ОС Windows.

:::

::: tip Осуществите выбор варианта разметки диска и нажмите "__Далее__"

![Осуществите выбор варианта разметки диска и нажмите "Далее"](/ordinary-install/inst-picture7.png)

:::

Если на вашем диске уже была какая-то информация, то можно отметить чекбокс "__Очистить выбранные диски перед применением профиля__". Это означает, что все предыдущие данные будут стёрты, разделы будут размечены и отформатированы заново, и на них будет установлена ОС. Затем программа установки предупредит вас о необратимости изменений. 

::: warning ВАЖНО!

Если на вашем диске были данные, ещё раз подумайте о том, нужны ли они, и есть ли у вас актуальная резервная копия. После этого действия все ваши данные будут уничтожены, и их восстановление превратится в довольно трудоёмкий и сложный процесс, без гарантии получить успешный результат и вернуть данные.

:::

::: tip Ещё раз подумайте, и если данные на диске вам больше не нужны, или есть их актуальная резервная копия -- нажмите "__ОК__"

![Не нажимайте "ОК" до тех пор, пока вы не убедитесь в том, что данные вам не нужны, или в том, что имеется актуальная резервная копия](/ordinary-install/inst-picture8.png)

:::

После этого система создаст выбранные вами разделы. Обратите внимание на то, что в том случае, если вы используете современное оборудование с поддержкой режима загрузки UEFI (рекомендуется использовать этот режим загрузки), операционная система автоматически создаст дополнительный служебный раздел для хранения переменных EFI, с точкой монтирования `/boot/efi`, типом файловой системы FAT32 и размером 512 мегабайт. Согласитесь с выбором и нажмите "__Далее__".

::: tip Подтвердите конфигурацию разметки диска и нажмите "__Далее__". Вариант для ФС ext4.

![Подтвердите конфигурацию разметки диска и нажмите "Далее". Вариант для ФС ext4](/ordinary-install/inst-picture9.png)

:::

::: tip Подтвердите конфигурацию разметки диска и нажмите "__Далее__". Вариант для ФС btrfs.

![Подтвердите конфигурацию разметки диска и нажмите "Далее". Вариант для ФС btrfs](/ordinary-install/inst-picture9-2.png)

:::


Ещё раз подтвердите свои действия и продолжайте установку. 

::: tip Подтвердите действия и нажмите "__OK__". Вариант для ФС ext4.

![Подтвердите действия и нажмите "OK". Вариант для ФС ext4](/ordinary-install/inst-picture10.png)

:::

Ещё раз подтвердите свои действия и продолжайте установку.

::: tip Подтвердите действия и нажмите "__OK__". Вариант для ФС btrfs.

![Подтвердите действия и нажмите "OK". Вариант для ФС btrfs](/ordinary-install/inst-picture10-2.png)

:::



### Шаг установки №5. Установка базовой системы

На этом шаге установки никаких действий от пользователя не требуется. Программа установки сообщает, что приступила к установке базовой системы. На этом шаге устанавливаются основные компоненты системы, без которых она не может функционировать.

::: tip Пример установки базовой системы

![Пример установки базовой системы](/ordinary-install/inst-picture11.png)

:::

### Шаг установки №6. Установка системы

На этом шаге установки, как и на предыдущем, никаких действий от пользователя не требуется. Программа установки сообщает, что приступила к установке всех нужных пользователям программ. На этом шаге устанавливаются компоненты системы, без которых она может функционировать только ограниченно.

::: tip Пример установки системы

![Пример установки системы](/ordinary-install/inst-picture12.png)

:::


### Шаг установки №7. Сохранение настроек

На этом шаге установки, как и на двух предыдущих шагах, никаких действий от пользователя не требуется. Программа установки в этот момент производит первичную конфигурацию ОС для последующего запуска.

::: tip Пример окна сохранения настроек

![Пример окна сохранения настроек](/ordinary-install/inst-picture13.png)

:::

### Шаг установки №8. Установка загрузчика

Далее программа установки предложит вам установить загрузчик. В большинстве случаев целесообразно согласиться с предложением по умолчанию. Программа установки обычно корректно распознаёт диск на который необходимо установить загрузчик. Однако настоятельно рекомендуется установить пароль на загрузчик, это усложнит компрометацию системы.

::: warning ВАЖНО!

Загрузчик -- это специальная программа, без которой ваша операционная система не сможет корректно загрузится и работать. ОС Alt Linux использует наиболее популярный, современный и функциональный загрузчик -- GRUB2.

:::

Если вы решите установить пароль на загрузчик, то отметьте чекбокс "__Установить или сбросить пароль__" и введите желаемый пароль на загрузчик. При обычном использовании системы вы не будете иметь необходимость вводить этот пароль. Но если вам позднее потребуется изменить параметры текущей загрузки, то вы будете обязаны ввести имя пользователя, управляющего модификацией загрузки и этот пароль. Используемое имя для модификации параметров загрузчика всегда одинаковое -- `boot`. И это имя не имеет никакого отношения к именам пользователей в ОС. Рекомендуется использовать стойкий пароль загрузчика, для домашнего пользователя приемлемым вариантом будет использование парольной фразы не короче, чем в 6 знаков.

::: tip Отметьте чекбокс "Установить или сбросить пароль", заполните поля с парольной фразой загрузчика и нажмите "__Далее__"

![Отметьте чекбокс "Установить или сбросить пароль", заполните поля с парольной фразой загрузчика и нажмите "Далее"](/ordinary-install/inst-picture14.png)

:::

Если же вы решите не устанавливать пароль на загрузчик, то просто согласитесь с предложением программы установки и нажмите "__Далее__".

::: tip Согласитесь с предложением по умолчанию и нажмите "__Далее__"

![Согласитесь с предложением по умолчанию и нажмите "Далее"](/ordinary-install/inst-picture15.png)

:::


### Шаг установки №9. Имя компьютера

Далее необходимо указать имя компьютера (системы). Настоятельно рекомендуется использовать уникальное в рамках используемой сети имя, и полностью определённое. Рекомендации по его выбору уже приводились выше, в разделе "__Подготовительные процедуры__". При необходимости повторно перечитайте этот раздел и придумайте уникальное имя для своей системы, или обратитесь к администратору вашей сети.

::: tip Укажите имя системы и нажмите "__Далее__"

![Укажите имя системы и нажмите "Далее"](/ordinary-install/inst-picture16.png)

:::

### Шаг установки №10. Администратор системы

Затем необходимо придумать пароль для администратора системы. Задайте пароль администратора системы, и нажмите "__Далее__".

::: warning ВАЖНО!

Администратор системы (ещё его называют `root` (рут), по имени в системе) -- это пользователь, обладающий неограниченными полномочиями, способный производить в системе любые действия, в том числе деструктивные. Критически важно использовать стойкий к подбору и длинный пароль администратора. Для пароля администратора рекомендуется использовать случайную комбинацию из букв разного регистра, цифр и знаков препинания. Не разумно использовать популярные слова типа `Привет`, `пароль`, `Pa$$w0rd`, даты рождения себя или родственников, комбинации символов, идущих подряд, вроде `qwerty`, и т.п. 

Если у вас есть сложности с придумыванием стойких паролей, то отметив чекбокс "__Создать автоматически__", программа установки предложит вам устойчивый к компрометации пароль. Запомните его.

Повседневное использование системы не следует осуществлять в контексте полномочий учётной записи администратора `root`. Необходимо повседневную работу в системе осуществлять от имени обычного пользователя, используя учётную запись администратора только в крайнем случае при обслуживании, восстановлении или настройке параметров системы, требующих обязательного использования учётной записи администратора. При использовании учётной записи администратора `root` всегда действуйте аккуратно, перепроверяя вводимые команды и то, что вы делаете, прежде чем вы нажмёте __ENTER__ от его имени. Совершённые от имени администратора ошибки могут носить необратимый характер.

:::

::: tip Задайте пароль администратора системы и нажмите "__Далее__"

![Задайте пароль администратора системы и нажмите "Далее"](/ordinary-install/inst-picture17.png)

:::

### Шаг установки №11. Системный пользователь

Система предложит создать системного пользователя. Это именно тот пользователь, от имени которого необходимо осуществлять повседневную работу в ОС. 

Обратите внимание, что если установлен чекбокс "__Login__" (установлен по умолчанию) , то этот пользователь будет включён в служебную системную группу `wheel`, что позволит ему переключаться в контекст учетной записи администратора системы `root` при необходимости (используя команду `su -`). Иначе (если чекбокс "__Login__" снять), переключиться в контекст учётной записи администратора не получится, и придётся входить администратором в отдельный сеанс на текстовом терминале.


Когда вы будете придумывать пароль для пользователя рекомендуется руководствоваться теми же соображениями, что и при выборе пароля администратора `root`. Само-собой, пароль пользователя должен отличаться от пароля администратора. 

Если у вас есть сложности с придумыванием стойких паролей, то отметив чекбокс "__Создать автоматически__", программа установки предложит вам устойчивый к компрометации пароль. Запомните его.

Поле "__Настоящее имя__" создано для удобства, и может не заполняться, или заполняться на русском языке. 

Поле "__Имя__" должно быть обязательно заполнено латиницей, и не иметь спецсимволов (знаков препинания) или пробелов. 

::: tip Задайте имя и пароль для пользователя и нажмите "__Далее__"

![Задайте имя и пароль для пользователя и нажмите "Далее"](/ordinary-install/inst-picture18.png)

:::

### Шаг установки №13. Завершение установки

Если всё выполнено правильно, то вы увидите сообщение об окончании установки. Нажмите "__Завершить__". После этого ваша новая система Alt Linux перезагрузится и вы сможете приступить к её использованию. Желаем вам приятной, удобной, безопасной и эффективной работы в системе.

::: tip Завершение установки, нажмите "__Завершить__"

![Завершение установки, нажмите "Завершить"](/ordinary-install/inst-picture18.png)

:::


