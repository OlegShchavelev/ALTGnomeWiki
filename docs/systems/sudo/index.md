# SUDO

Sudo (su “do”) — позволяет пользователю с привилегированными права делегировать полномочия, чтобы предоставить определённым пользователям (или группам пользователей) возможность запускать некоторые (или все) команды от имени root или другого пользователя, предоставляя журнал аудита команд и их аргументов.

## Быстрая настройка sudo

Для быстрого разрешения всех привилегированных прав пользователя входящее в группу `wheel`:

```shell
su -
control sudowheel enabled
exit
```

Проверим, результат, наберём `sudo -l`, необходимо вывести пароль для подтверждения операции:

::: details Пользователю `oleg` присвоены привилегированные права:

```
Соответствие записей Defaults для oleg на alt-gnome:
    env_keep+="DISPLAY XAUTHORITY"

Пользователь oleg может выполнять следующие
        команды на alt-gnome:
    (ALL) ALL
```

:::

Для запрета всех привилегированных прав пользователя входящее в группы `wheel`:

```shell
su -
control sudowheel disabled
exit
```

Проверим, результат, наберём `sudo -l`:

::: details У пользователя `oleg` отсутствует привилегированные права:

```
Извините, пользователь oleg не может запустить sudo на alt-gnome.
```

:::

## Детальная настройка sudo

Разрешить все привилегированные права для пользователя `oleg` на устройстве `alt-gnome`

```shell
oleg alt-gnome=(ALL) ALL
```

Разрешить определённые команды (apt-get, rpm, fdisk) для пользователя `oleg` на устройстве `alt-gnome`

```shell
oleg alt-gnome=(ALL) /usr/bin/apt-get,/usr/bin/rpm,/sbin/fdisk
```

Разрешить все привилегированные права для пользователей входящую в группу `wheel`

```shell
WHEEL_USERS ALL=(ALL) ALL
```

Создадим правило в файле `10-oleg` и сохраним в директории `/etc/sudoers.d/`:

```shell
su -
echo "oleg alt-gnome=(ALL) ALL" >> /etc/sudoers.d/10-oleg
exit
```

:::info
Мы рекомендуем называть файл, к примеру правило для конкретного пользователя или конкретной группы, то название файла: `10-artem`, `20-olga`, `30-developers`. Обратите внимание, что в мануале используется имя пользователя и имя устройства автора статьи, **не забудьте поменять на свои значения**
:::

Проверим, результат, наберём `sudo -l`, необходимо вывести пароль для подтверждения операции:

::: details Пользователю `oleg` присвоены привилегированные права:

```
Соответствие записей Defaults для oleg на alt-gnome:
    env_keep+="DISPLAY XAUTHORITY"

Пользователь oleg может выполнять следующие
        команды на alt-gnome:
    (ALL) ALL
```

:::

## Полезные команды при настройке sudo

Разрешены привилегированные права пользователю:

```shell
sudo -l
```

:::info
Необходимо быть авторизированным под пользователем для которого вы хотите проверить статус
:::

Добавить пользователя `oleg` в группу `wheel`:

```shell
gpasswd -a oleg wheel
```

Узнать имя устройства через терминал:

```shell
hostname
```

::: details Пример ответа hostname:

```
alt-gnome.
```

:::
