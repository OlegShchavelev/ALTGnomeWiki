# markdown-it-conditional-render

[![build](https://github.com/palmcivet/markdown-it-conditional-render/actions/workflows/build.yml/badge.svg)](https://github.com/palmcivet/markdown-it-conditional-render/actions/workflows/build.yml)

[English](./README.md) | ä¸­æ–‡

Markdown It æ¡ä»¶æ¸²æŸ“æ’ä»¶ï¼Œçµæ„Ÿæ¥è‡ª [markdown-it-condition](https://www.npmjs.com/package/markdown-it-condition)ï¼ŒåŸä»“åº“å·²è¢«åˆ é™¤æˆ–è½¬ç§»ï¼Œä½† NPM ä»å¯è·å–åˆ°ä»£ç ï¼Œå·²æ‘˜å½•äº [lib/markdown-it-condition.js](./lib/markdown-it-condition.js)

[Demo](https://palmcivet.github.io/markdown-it-conditional-render/)

## âš™ï¸ é…ç½®

- `ruleName`ï¼š*string*
  - é»˜è®¤ `condition`
  - è‡ªå®šä¹‰è§„åˆ™å
- `ifMarker`ï¼š*string*
  - é»˜è®¤ `::if`
  - å¼€å§‹åˆ¤æ–­ï¼Œif åˆ†æ”¯æ¡ä»¶
- `elseIfMarker`ï¼š*string*
  - é»˜è®¤ `::elseif`
  - else if åˆ†æ”¯æ¡ä»¶
- `elseMarker`ï¼š*string*
  - é»˜è®¤ `::else`
  - else åˆ†æ”¯æ¡ä»¶
- `endIfMarker`ï¼š*string*
  - é»˜è®¤ `::endif`
  - ç»“æŸåˆ¤æ–­
- `validate(condition: string): boolean`
  - é¢„å¤„ç†åŸå§‹æ–‡æœ¬ï¼ŒéªŒè¯æ–‡æœ¬ä¸­çš„åˆ†æ”¯æ¡ä»¶
  - é»˜è®¤è¿”å› `true`
- `evaluate(condition: string, value: any): boolean`
  - è§£æå®é™…å‚æ•°ï¼Œç§»é™¤ä¸æ»¡è¶³æ¡ä»¶çš„æ–‡æœ¬
  - é»˜è®¤å¤„ç†å¦‚ä¸‹ï¼š

	```ts
	function evaluate(condition: string, value: any) {
		let element = value;
		condition.split(".").forEach((field) => {
			element = element[field];
		});

		if (!!element) {
			return true;
		}

		return false;
	}
	```

> å„å‚æ•°ç¼ºçœæ—¶çš„å®Œæ•´ä½¿ç”¨æ–¹å¼è§ [ç¤ºä¾‹](#ç¤ºä¾‹)

## ğŸ“š ç¤ºä¾‹

```js
const MarkdownIt = require("markdown-it")
const markdownItEngine = new MarkdownIt();
const markdownItConditionalRender = require("markdown-it-conditional-render");

markdownItEngine.use(markdownItConditionalRender);

const res = markdownItEngine.render(
  `
::if flag.value

*This text will be shown*

::else

*This text won't

::endif
`,
{
  flag: {
    value: true,
  },
});

console.log(res);
```

## ğŸ”§ å¼€å‘

```bash
$ git clone https://github.com/palmcivet/markdown-it-conditional-render.git
$ cd ./markdown-it-conditional-render
$ pnpm add
$ pnpm run build
```

## ğŸ“… TODO

- [x] å®Œå–„ API
- [x] å®Œå–„é¡¹ç›®å‘½å
- [x] å®Œå–„æ–‡æ¡£
- [x] æ·»åŠ å•å…ƒæµ‹è¯•
- [x] æ·»åŠ  GitHub Actions
- [x] æ·»åŠ  Playground
- [ ] æ”¯æŒåµŒå¥—æ¡ä»¶åˆ¤æ–­

## âš–ï¸ è®¸å¯è¯

MIT
